<!DOCTYPE html>

<html>

<head>
    <meta charset="UTF-8">
    <title>Pacman</title>
    </style>

</head>

<body>

    <canvas id="canvasOne"></canvas>

    <script type="text/javascript">
        var mapArray = [
          [4, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 5],
         [10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10],
          [2, 0, 4, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 5, 0, 2],
          [2, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 2],
          [2, 0, 7, 6, 6, 6, 6, 5, 0, 4, 6, 6, 6, 6, 6, 6, 6, 6, 6, 5, 0, 0, 4, 6, 6, 5, 0, 0, 4, 6, 6, 6, 6, 6, 6, 6, 6, 6, 5, 0, 4, 6, 6, 6, 6, 8, 0, 2],
          [2, 0, 0, 0, 0, 0, 0, 2, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 2, 1, 1, 2, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 2, 0, 0, 0, 0, 0, 0, 2],
          [2, 6, 5, 0, 4, 6, 6, 8, 0, 2, 0, 4, 6, 6, 6, 6, 6, 5, 0, 2, 0, 4, 8, 1, 1, 7, 5, 0, 2, 0, 4, 6, 6, 6, 6, 6, 5, 0, 2, 0, 7, 6, 6, 5, 0, 4, 6, 2],
          [2, 1, 2, 0, 2, 0, 0, 0, 0, 2, 0, 2, 1, 1, 1, 1, 1, 2, 0, 2, 0, 7, 6, 6, 6, 6, 8, 0, 2, 0, 2, 1, 1, 1, 1, 1, 2, 0, 2, 0, 0, 0, 0, 2, 0, 2, 1, 2],
          [2, 1, 2, 0, 9, 6, 6, 6, 6, 8, 0, 7, 6, 6, 6, 6, 6, 8, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 7, 6, 6, 6, 6, 6, 8, 0, 7, 6, 6, 6, 6, 9, 0, 2, 1, 2],
          [2, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 4, 6, 6, 6, 6, 5, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 1, 2],
          [2, 1, 2, 0, 4, 6, 6, 6, 5, 0, 9, 6, 6, 6, 6, 5, 0, 9, 6, 8, 0, 2, 3, 3, 3, 3, 2, 0, 7, 6, 9, 0, 4, 6, 6, 6, 6, 9, 0, 4, 6, 6, 6, 5, 0, 2, 1, 2],
          [2, 6, 8, 0, 2, 1, 1, 1, 2, 0, 2, 1, 1, 1, 1, 2, 0, 2, 0, 0, 0, 2, 3, 3, 3, 3, 2, 3, 0, 0, 2, 0, 2, 1, 1, 1, 1, 2, 0, 2, 1, 1, 1, 2, 0, 7, 6, 2],
         [10, 0, 0, 0, 2, 1, 1, 1, 2, 0, 9, 6, 6, 6, 6, 8, 0, 2, 0, 4, 6, 3, 3, 3, 3, 3, 7, 6, 5, 0, 2, 0, 7, 6, 6, 6, 6, 9, 0, 2, 1, 1, 1, 2, 0, 0, 0, 10],
          [2, 6, 5, 0, 2, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 2, 3, 3, 3, 3, 3, 3, 3, 3, 2, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 2, 1, 1, 1, 2, 0, 4, 6, 2],
          [2, 1, 2, 0, 2, 1, 1, 1, 2, 0, 4, 6, 5, 0, 4, 6, 6, 8, 0, 7, 6, 6, 6, 6, 6, 6, 6, 6, 8, 0, 7, 6, 6, 5, 0, 4, 6, 5, 0, 2, 1, 1, 1, 2, 0, 2, 1, 2],
          [2, 1, 2, 0, 7, 6, 6, 6, 8, 0, 2, 1, 2, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 2, 1, 2, 0, 7, 6, 6, 6, 8, 0, 2, 1, 2],
          [2, 1, 2, 0, 0, 0, 0, 0, 0, 0, 2, 1, 2, 0, 2, 0, 4, 6, 5, 0, 4, 6, 6, 6, 6, 6, 6, 5, 0, 4, 6, 5, 0, 2, 0, 2, 1, 2, 0, 0, 0, 0, 0, 0, 0, 2, 1, 2],
          [2, 1, 2, 0, 9, 0, 9, 6, 9, 0, 2, 1, 2, 0, 2, 0, 2, 1, 2, 0, 2, 1, 1, 1, 1, 1, 1, 2, 0, 2, 1, 2, 0, 2, 0, 2, 1, 2, 0, 9, 6, 9, 0, 9, 0, 2, 1, 2],
          [2, 1, 2, 0, 2, 0, 2, 0, 2, 0, 2, 1, 2, 0, 2, 0, 2, 1, 2, 0, 2, 1, 1, 1, 1, 1, 1, 2, 0, 2, 1, 2, 0, 2, 0, 2, 1, 2, 0, 2, 0, 2, 0, 2, 0, 2, 1, 2],
          [2, 1, 2, 0, 2, 0, 9, 0, 9, 0, 7, 6, 8, 0, 9, 0, 7, 6, 8, 0, 2, 1, 1, 1, 1, 1, 1, 2, 0, 7, 6, 8, 0, 9, 0, 7, 6, 8, 0, 9, 0, 9, 0, 2, 0, 2, 1, 2],
          [2, 1, 2, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 2, 1, 2],
          [2, 1, 2, 0, 9, 0, 9, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 9, 0, 2, 1, 1, 1, 1, 1, 1, 2, 0, 9, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 9, 0, 9, 0, 2, 1, 2],
          [2, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 1, 2],
          [7, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 8, 6, 6, 6, 6, 6, 6, 8, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 8]
      ];

        var boundYSortArr = [];

        var lastPress;
        var notPressed = false;
        var score = 0;
        var canvas = document.getElementById("canvasOne");
        canvas.height = 550;
        canvas.width = 1000;
        var ctx = canvas.getContext("2d");

        var opClBool = 0;

        function coOrds(x, y) {
            this.x = x;
            this.y = y;
        }

        function character(position, speed, type) {
            this.position = new coOrds(position.x, position.y);
            this.speed = new coOrds(speed.x, speed.y);
            this.type = type;
            this.currPos = 0;
        }

        var en1 = new character({
            x: 530,
            y: 250
        }, {
            x: 20,
            y: 0
        }, "enemy");
        var en2 = new character({
            x: 470,
            y: 250
        }, {
            x: 20,
            y: 0
        }, "enemy");
        var pac = new character({
            x: 270,
            y: 130
        }, {
            x: 20,
            y: 0
        }, "pac");


        popAccBoundArr();

        draw();

        function draw() {
            var canvas = document.getElementById("canvasOne");
            canvas.height = canvas.height;
            canvas.width = canvas.width;
            ctx.lineWidth = 20;
            ctx.strokeRect(0, 0, canvas.width, canvas.height);
            ctx.lineWidth = 2;
            ctx.rect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = "rgb(7,2,42)";
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = "30px Arial";
            ctx.fillText("Score: " + score, 30, 520);
            window.requestAnimationFrame(chkCollisions);
            var side = '';
            update();

            pcDirctnSwtch();
            document.addEventListener('keydown', function (event) {
                side = chkCollisions();
                lastPress = event.keyCode;
                //left
                if (event.keyCode == 37) {
                    if (side.x != 'r' && (boundYSortArr[pac.currPos - 1].type == 3 || boundYSortArr[pac.currPos - 1].type == 0)) {
                        pac.speed.x = -20;
                        pac.speed.y = 0;
                        notPressed = false
                    } else {
                        notPressed = true;
                    }
                }
                //right
                else if (event.keyCode == 39) {
                    if (side.x != 'l' && (boundYSortArr[pac.currPos + 1].type == 3 || boundYSortArr[pac.currPos + 1].type == 0)) {
                        pac.speed.x = 20;
                        pac.speed.y = 0;
                        notPressed = false;
                    } else {
                        notPressed = true;
                    }
                }
                //down
                else if (event.keyCode == 40) {
                    if (side.y != 'd' && (boundYSortArr[pac.currPos + 48].type == 3 || boundYSortArr[pac.currPos + 48].type == 0)) {
                        pac.speed.x = 0;
                        pac.speed.y = 20;
                        notPressed = false;
                    } else {
                        notPressed = true;
                    }
                }
                //up
                else if (event.keyCode == 38) {
                    if (side.y != 'u' && (boundYSortArr[pac.currPos - 48].type == 3 || boundYSortArr[pac.currPos - 48].type == 0)) {
                        pac.speed.x = 0;
                        pac.speed.y = -20;
                        notPressed = false;
                    } else {
                        notPressed = true;
                    }
                }
            });
            if(notPressed == true)
            {
                savedMove();   
            }
        }
        
        function savedMove() {
            side = chkCollisions();

            //left
            if (lastPress == 37) {
                if (side.x != 'r' && (boundYSortArr[pac.currPos - 1].type == 3 || boundYSortArr[pac.currPos - 1].type == 0)) {
                    pac.speed.x = -20;
                    pac.speed.y = 0;
                }
            }
            //right
            else if (lastPress == 39) {
                if (side.x != 'l' && (boundYSortArr[pac.currPos + 1].type == 3 || boundYSortArr[pac.currPos + 1].type == 0)) {
                    pac.speed.x = 20;
                    pac.speed.y = 0;
                }
            }
            //down
            else if (lastPress == 40 && (boundYSortArr[pac.currPos + 48].type == 3 || boundYSortArr[pac.currPos + 48].type == 0)) {
                if (side.y != 'd') {
                    pac.speed.x = 0;
                    pac.speed.y = 20;
                }
            }
            //up
            else if (lastPress == 38 && (boundYSortArr[pac.currPos - 48].type == 3 || boundYSortArr[pac.currPos - 48].type == 0)) {
                if (side.y != 'u') {
                    pac.speed.x = 0;
                    pac.speed.y = -20;
                }
            }
        }

        function pcDirctnSwtch() {
            if (pac.speed.x > 0) {
                pacMov(1.8, 0.2);
            } else if (pac.speed.x < 0) {
                pacMov(0.8, 1.2);
            } else if (pac.speed.y > 0) {
                pacMov(0.2, 0.8);
            } else if (pac.speed.y < 0) {
                pacMov(1.2, 1.8);
            }
        }

        function pacMov(pi1, pi2) {
            var snd = new Audio("waka waka.mp3"); // buffers automatically when created
            snd.play();
            drawAll();

            ctx.beginPath();
            ctx.fillStyle = "rgb(255,238,0)";
            if (opClBool == 0) {
                ctx.arc(pac.position.x, pac.position.y, 15, pi1 * Math.PI, pi2 * Math.PI, true);
                ctx.lineTo(pac.position.x, pac.position.y);
                opClBool = 1;
            } else {
                ctx.arc(pac.position.x, pac.position.y, 15, 2 * Math.PI, 0 * Math.PI, true);
                opClBool = 0;
            }

            ctx.stroke();
            ctx.fill();
            ctx.closePath();
            ctx.fillStyle = "rgb(0,0,0)";
            window.requestAnimationFrame(chkCollisions);
            if (opClBool == 1) {
                setTimeout(function () {
                    pacMov(pi1, pi2);
                }, 200)
            } else {
                setTimeout(draw, 200);
            }
        }

        function drawAll() {
            drawItems();
            enemyDraw(en1);
            enemyDraw(en2);
        }

        function chkCollisions() {
            var side = {
                x: '',
                y: ''
            };
            if (pac.position.x + 25 >= canvas.width - 15 || pac.position.x - 25 <= 0 + 15) {
                pac.speed.x = 0;
                if (pac.position.x > (canvas.width / 2)) {
                    side.x = 'r';
                } else {
                    side.x = 'l';
                }
            }
            if (pac.position.y + 25 >= canvas.height - 15 || pac.position.y - 25 <= 0 + 15) {
                pac.speed.y = 0;
                if (pac.position.y > (canvas.height / 2)) {
                    side.y = 'd';
                } else {
                    side.y = 'u';
                }
            }
            return side;
        }

        function update() {
            usrUpdate(pac);
            enUpdate(en1);
            enUpdate(en2);
        }

        function usrUpdate(pac) {
            var possMove;
            var bool;
            if (pac.speed.x != 0) {
                //chk the space to the left or right   
                possMove = pac.position.x + pac.speed.x;
                var pos = {
                    y: pac.position.y,
                    x: pac.position.x,
                    name: pac.type
                };
                var pos1 = {
                    y: pac.position.y,
                    x: possMove
                };
                bool = chkVertMapColl(pos, pos1);
            } else if (pac.speed.y != 0) {
                //chk the space up or down   
                possMove = pac.position.y + pac.speed.y;
                var pos = {
                    y: pac.position.y,
                    x: pac.position.x,
                    name: pac.type
                };
                var pos1 = {
                    y: possMove,
                    x: pac.position.x
                };
                bool = chkVertMapColl(pos, pos1);
            }
            if (bool == false) {
                pac.position.x += pac.speed.x;
                pac.position.y += pac.speed.y;
            }
        }

        function chkVertMapColl(curPos, possPos) {
            var i = 0;
            for (i = 0; i < boundYSortArr.length; ++i) {
                if (curPos.y != boundYSortArr[i].y) {
                    i += mapArray[1].length - 1;
                } else if (curPos.x == boundYSortArr[i].x) {
                    //found currunt position
                    if (posDiff(curPos, possPos) == 'x') {
                        if (curPos.x > possPos.x) {
                            i--;
                        } else if (curPos.x < possPos.x) {
                            i++;
                        }
                    } else {
                        if (curPos.y > possPos.y) {
                            i -= mapArray[0].length;
                        } else {
                            i += mapArray[0].length;
                        }
                    }
                    break;

                }
            }

            if (curPos.name == "pac") {
                pac.currPos = i;
                console.log(boundYSortArr[i]);
            }
            //chk type
            if ((boundYSortArr[i].type != 0) && (boundYSortArr[i].type != 3) || (boundYSortArr[i].type == 10)) {
                if (boundYSortArr[i].type == 10) {
                    if (boundYSortArr[i].x <= 30) {
                        pac.position.x = 950;

                        if (boundYSortArr[i + mapArray[1].length - 3].type == 0) {
                            boundYSortArr[i + mapArray[1].length - 2].type = 3;
                            score++;
                        }
                    } else {
                        pac.position.x = 50;

                        if (boundYSortArr[i - mapArray[1].length - 2].type == 0) {
                            boundYSortArr[i - mapArray[1].length - 2].type = 3;
                            score++;
                        }
                    }
                }

                return true;
            } else {
                if (curPos.name == "pac") {
                    if (boundYSortArr[i].type == 0) {
                        boundYSortArr[i].type = 3;
                        score++;
                    }
                }

                return false;
            }
        }

        function posDiff(curPos, possPos) {
            //x is different
            if (curPos.x != possPos.x) {
                return 'x';
            }
            //y is different
            else {
                return 'y';
            }
        }

        function enUpdate(en) {

            enemyDistances(en.position.x, en.position.y, pac.position.x, pac.position.y, en);
            var possMove;
            var bool;
            if (en.speed.x != 0) {
                //chk the space to the left or right   
                possMove = en.position.x + en.speed.x;
                var pos = {
                    y: en.position.y,
                    x: en.position.x,
                    name: en.type
                };
                var pos1 = {
                    y: en.position.y,
                    x: possMove
                };
                bool = chkVertMapColl(pos, pos1);
            } else if (en.speed.y != 0) {
                //chk the space up or down   
                possMove = en.position.y + en.speed.y;
                var pos = {
                    y: en.position.y,
                    x: en.position.x,
                    name: en.type
                };
                var pos1 = {
                    y: possMove,
                    x: en.position.x
                };
                bool = chkVertMapColl(pos, pos1);
            }
            if (bool == false) {
                en.position.x += en.speed.x;
                en.position.y += en.speed.y;
            }
        }

        function enemyDraw(en) {
            ctx.beginPath();
            if (en == en1) {
                ctx.fillStyle = "rgb(240,33,17)";
            } else {
                ctx.fillStyle = "rgb(0,0,17)";
            }
            ctx.arc(en.position.x, en.position.y, 15, 0, 2 * Math.PI, false);
            ctx.fill();
            ctx.closePath();
        }

        function enemyDistances(eX, eY, usrX, usrY, en) {
            var up = Infinity,
                left = Infinity,
                right = Infinity,
                down = Infinity,
                min = 0;
            var currPos = {
                y: en.position.y,
                x: en.position.x,
                name: en.type
            };
            var upPos = {
                y: eY - 10,
                x: eX
            };
            var downPos = {
                y: eY + 10,
                x: eX
            };
            var leftPos = {
                y: eY,
                x: eX - 10
            };
            var rightPos = {
                y: eY,
                x: eX + 10
            };

            if (!chkVertMapColl(currPos, upPos)) {
                up = dist(eX, eY - 10, usrX, usrY);
            }
            if (!chkVertMapColl(currPos, downPos)) {
                down = dist(eX, eY + 10, usrX, usrY);
            }
            if (!chkVertMapColl(currPos, rightPos)) {
                right = dist(eX + 10, eY, usrX, usrY);
            }
            if (!chkVertMapColl(currPos, leftPos)) {
                left = dist(eX - 10, eY, usrX, usrY);
            }

            min = Math.min(up, down, right, left);
            calcEnMove(up, down, right, left, min, en);
        }

        function dist(enX, enY, usrX, usrY) {
            var b1 = enX - usrX;
            b1 = Math.pow(b1, 2);
            var b2 = enY - usrY;
            b2 = Math.pow(b2, 2);
            return Math.sqrt(b1 + b2);
        }

        function calcEnMove(u, d, r, l, min, en) {
            if (u == min) {
                en.speed.x = 0;
                en.speed.y = -20;
            } else if (d == min) {
                en.speed.x = 0;
                en.speed.y = 20;
            } else if (r == min) {
                en.speed.x = 20;
                en.speed.y = 0;
            } else {
                en.speed.x = -20;
                en.speed.y = 0;
            }
        }

        function popAccBoundArr() {
            var x = 20,
                y = 10;
            for (var i = 0; i < mapArray.length; ++i) {
                var inner = mapArray[i];
                y += 20;
                x = 30;
                for (var j = 0; j < inner.length; ++j) {
                    var outer = inner[j];
                    sortBoundaries(outer, x, y, boundYSortArr);
                    x += 20;
                }
            }
        }


        function sortBoundaries(type, x, y, arr) {
            arr.push({
                type, x, y
            });
        }

        function drawItems() {
            for (var i = 0; i < boundYSortArr.length; ++i) {
                switch (boundYSortArr[i].type) {

                    //boundary
                case 0:
                    ctx.beginPath();
                    ctx.fillStyle = "rgb(9,245,0)";
                    ctx.arc(boundYSortArr[i].x, boundYSortArr[i].y, 3, 0, 2 * Math.PI, false);
                    ctx.lineWidth = 0;
                    ctx.fill();
                    ctx.strokeStyle = "rgb(24,202,230)";
                    ctx.closePath();
                    break;

                case 1:
                    ctx.beginPath();
                    ctx.strokeStyle = "rgb(24,202,230)";
                    ctx.arc(boundYSortArr[i].x, boundYSortArr[i].y, 10, 0, 2 * Math.PI, false);
                    ctx.lineWidth = 2;
                    ctx.stroke();
                    ctx.closePath();
                    break;

                    // verticle side
                case 2:
                    ctx.beginPath();
                    ctx.strokeStyle = "rgb(255,0,255)";
                    ctx.moveTo(boundYSortArr[i].x, boundYSortArr[i].y - 20);
                    ctx.lineTo(boundYSortArr[i].x, boundYSortArr[i].y + 20);
                    ctx.stroke();
                    ctx.closePath();
                    break;
                    //eaten food
                case 3:
                    break;

                    //top left corner
                case 4:
                    ctx.beginPath();
                    ctx.strokeStyle = "rgb(255,0,255)";
                    ctx.moveTo(boundYSortArr[i].x, boundYSortArr[i].y);
                    ctx.lineTo(boundYSortArr[i].x, boundYSortArr[i].y + 10);
                    ctx.stroke();
                    ctx.closePath();

                    ctx.beginPath();
                    ctx.strokeStyle = "rgb(255,0,255)";
                    ctx.moveTo(boundYSortArr[i].x, boundYSortArr[i].y);
                    ctx.lineTo(boundYSortArr[i].x + 10, boundYSortArr[i].y);
                    ctx.stroke();
                    ctx.closePath();
                    break;

                    //top right corner
                case 5:
                    ctx.beginPath();
                    ctx.strokeStyle = "rgb(255,0,255)";
                    ctx.moveTo(boundYSortArr[i].x, boundYSortArr[i].y);
                    ctx.lineTo(boundYSortArr[i].x, boundYSortArr[i].y + 10);
                    ctx.stroke();
                    ctx.closePath();

                    ctx.beginPath();
                    ctx.strokeStyle = "rgb(255,0,255)";
                    ctx.moveTo(boundYSortArr[i].x, boundYSortArr[i].y);
                    ctx.lineTo(boundYSortArr[i].x - 10, boundYSortArr[i].y);
                    ctx.stroke();
                    ctx.closePath();
                    break;

                    //horizontal line
                case 6:
                    ctx.beginPath();
                    ctx.strokeStyle = "rgb(255,0,255)";
                    ctx.moveTo(boundYSortArr[i].x - 20, boundYSortArr[i].y);
                    ctx.lineTo(boundYSortArr[i].x + 20, boundYSortArr[i].y);
                    ctx.stroke();
                    ctx.closePath();
                    break;

                    //bottom left Corner
                case 7:
                    ctx.beginPath();
                    ctx.strokeStyle = "rgb(255,0,255)";
                    ctx.moveTo(boundYSortArr[i].x, boundYSortArr[i].y - 10);
                    ctx.lineTo(boundYSortArr[i].x, boundYSortArr[i].y);
                    ctx.stroke();
                    ctx.closePath();

                    ctx.beginPath();
                    ctx.strokeStyle = "rgb(255,0,255)";
                    ctx.moveTo(boundYSortArr[i].x + 10, boundYSortArr[i].y);
                    ctx.lineTo(boundYSortArr[i].x, boundYSortArr[i].y);
                    ctx.stroke();
                    ctx.closePath();
                    break;
                    //bottom right corner    
                case 8:
                    ctx.beginPath();
                    ctx.strokeStyle = "rgb(255,0,255)";
                    ctx.moveTo(boundYSortArr[i].x, boundYSortArr[i].y - 10);
                    ctx.lineTo(boundYSortArr[i].x, boundYSortArr[i].y);
                    ctx.stroke();
                    ctx.closePath();

                    ctx.beginPath();
                    ctx.strokeStyle = "rgb(255,0,255)";
                    ctx.moveTo(boundYSortArr[i].x - 10, boundYSortArr[i].y);
                    ctx.lineTo(boundYSortArr[i].x, boundYSortArr[i].y);
                    ctx.stroke();
                    ctx.closePath();
                    break;

                    //end of line
                case 9:
                    break;
                case 10:
                    ctx.beginPath();
                    ctx.strokeStyle = "rgb(255,0,255)";
                    ctx.moveTo(boundYSortArr[i].x, boundYSortArr[i].y - 20);
                    ctx.lineTo(boundYSortArr[i].x, boundYSortArr[i].y + 20);
                    ctx.stroke();
                    ctx.closePath();
                    break;
                }

                ctx.strokeStyle = "rgb(0,0,0)";
            }
        }
    </script>

</body>

</html>